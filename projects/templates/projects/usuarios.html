{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block page_title %} Usuários {% endblock page_title %}

{% block content %}
<h1>Usuários</h1>
<hr>
<div class="content">
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-12">

				{% if inclui %}

				{% elif altera %}
					
					<div class="row">
						<div class="col-xs-4 mb-2 mt-2 p-2">
							<form method="POST">{% csrf_token %}
								
								{{ form.email|as_crispy_field }}
								{{ form.name|as_crispy_field }}
								{{ form.bloqueado|as_crispy_field }}
								{{ form.tipo|as_crispy_field }}
								{{ form.perfil|as_crispy_field }}
								
								<input type="submit" class="btn btn-primary mt-4" value="Confirmar">
								<a href="{% url 'usuarios' %}" class="btn btn-danger mt-4">Cancelar</a>
								
							</form>
						</div>
					</div>
					
				{% else %}
					<table class="table table-hover">
						<thead>
							<tr>
								<th>Name</th>
								<th>E-mail</th>
								<th>Ativo</th>
								<th>Tipo</th>
								<th>Perfil</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							{% for usuario in usuarios %}
							<tr>
								<td>{{ usuario.name }}</td>
								<td>{{ usuario.email }}</td>
								<td>{{ usuario.bloqueado }}</td>
								<td>{{ usuario.tipo }}</td>
								<td>{{ usuario.perfil }}</td>
								<td>
									<a href="{% url "usuarios" opc='alterar' pk=usuario.email %}" class="btn btn-sm btn-secondary">Editar</a>
									<a href="{% url "usuarios" opc='delete' pk=usuario.email %}" class="btn btn-sm btn-danger">Excluir</a>
								</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
					<a href="{% url 'cadastrar_usuario' %}" class="btn btn-primary mt-4">Cadastrar Usuário</a>
				{% endif %}

			</div>
		</div>
	</div>
</div>

{% endblock content %}